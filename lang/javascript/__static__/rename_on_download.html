<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>下载时重命名</title>
  </head>
  <body>
    <ul>
      <li>
        <a href="http://192.168.8.101:9000/bucket-test/test.docx" download="测试.docx">test.docx</a>
      </li>
      <li>
        <a href="http://192.168.8.101:9000/bucket-test/test.docx" download="测试.docx" id="ref">测试.docx</a>
      </li>
    </ul>
    <script>
      function download(url, name) {
        fetch(url, { method: 'get', mode: 'no-cors' })
          .then(response => response.blob())
          .then(blob => {
            const link = document.createElement('a')
            link.href = URL.createObjectURL(blob)
            link.download = name
            link.click()
          })
      }

      const ref = document.getElementById('ref')

      ref.onclick = e => {
        e.preventDefault()
        const url = ref.getAttribute('href')
        const name = ref.getAttribute('download')
        download(url, name)
      }
    </script>
  </body>
</html>
