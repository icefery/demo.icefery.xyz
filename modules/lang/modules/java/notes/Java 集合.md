### `HashMap` 的长度为什么是 2 的幂次方

> 为了能让 `HashMap` 存取高效、尽量较少碰撞，也就是尽量把数据分配均匀。

> Hash 值的范围值是 `[-2^32, 2^32)`, 前后加起来大概 40 亿的映射空间，只要哈希函数映射得比较均匀松散，一般应用是很难出现碰撞的。但问题是一个 40 亿长度的数组，内存是放不下的。所以这个散列值是不能直接拿来用的。用之前还要先对数组的长度取模运算，得到的余数才能用来要存放的位置也就是对应的数组下标。这个数组下标的计算方法是 `hash&(length-1)`。

> 取模（`%`）操作中如果除数是 2 的幂次方，则等价于其除数取模操作（`&`），也就是说 `hash%length == hash&(length-1)` 的前提是 `length` 是 2 的幂次方。并且采用二进制与操作（`&`）相对于取模操作（`%`） 能够提高运算效率，这就解释了 `HashMap` 的长度为什么是 2 的幂次方。
